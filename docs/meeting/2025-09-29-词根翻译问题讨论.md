# 词根翻译问题讨论纪要

**日期**: 2025-09-29
**参与人**: 凯哥
**记录人**: Claude Code

## 问题背景

在词根翻译过程中，遇到同义词/近义词无法正确翻译的问题。例如：
- 已有词根：`DT:交易日`
- 需要翻译：`交易日期`
- 当前结果：`DT期`（需要手动添加`DT:交易日期`词根）

## 讨论内容

### 1. 问题分析
- **数据结构**: 当前使用简单键值对映射 `chinese -> english`
- **算法**: 贪心最长匹配，精确匹配优先
- **痛点**: 需要为每个词根变体创建独立词根，管理繁琐

### 2. 方案探讨

#### 方案A: 算法增强（前缀匹配 + 词缀识别）
- **原理**: 在精确匹配失败时，尝试前缀匹配 + 词缀翻译
- **示例**: `交易日期` → 前缀`交易日` + 词缀`期` → `DT_Period`
- **评估**: ❌ 放弃 - 仍需维护词缀规则，复杂度与维护词根相当

#### 方案B: 系统建议（最终选定方向）
- **原理**: 保持翻译算法不变，在词根管理层面提供智能建议
- **示例**: 检测到`交易日期`时，建议"检测到`交易日`词根，是否添加`交易日期`词根？"
- **优势**:
  - 零算法复杂度，翻译逻辑保持简单可预测
  - 用户完全控制，决定哪些变体值得添加
  - 向后兼容，不影响现有功能

## 核心洞察

- **好品味原则**: 保持简单的事情简单，复杂的事情变得简单
- **数据结构**: 现有键值对映射是"好品味"设计 - 简单、明确、无副作用
- **复杂度控制**: 系统建议方案独立于翻译算法，不会引入复杂性
- **向后兼容**: 符合"Never break userspace"原则

## 后续行动

1. **设计系统建议功能原型**
   - 检测未翻译词汇与现有词根的关联性
   - 提供一键添加建议
   - 学习用户偏好模式

2. **考虑批量建议能力**
   - 文档导入时批量扫描未翻译词汇
   - 智能推荐相关词根变体

3. **保持核心翻译逻辑不变**
   - 确保现有词根翻译功能完全不受影响

## 技术要点

- 翻译算法保持现有贪心最长匹配
- 词根数据库结构保持不变
- 建议系统作为独立模块实现
- 用户交互界面需要友好直观

---

**总结**: 通过系统建议而非算法复杂化来解决词根管理效率问题，符合Linus的实用主义哲学和好品味标准。